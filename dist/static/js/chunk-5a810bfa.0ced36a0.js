(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5a810bfa"],{"06c5":function(e,t,r){"use strict";r.d(t,"a",(function(){return i}));r("a630"),r("fb6a"),r("b0c0"),r("d3b7"),r("ac1f"),r("00b4"),r("25f0"),r("3ca3");var n=r("6b75");function i(e,t){if(e){if("string"===typeof e)return Object(n["a"])(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?Object(n["a"])(e,t):void 0}}},"1b80":function(e,t,r){"use strict";t["a"]={data:function(){return{page:1,limit:10,total:0}},methods:{handleSizeChange:function(e){this.limit=e,this.page=1,this.getList(),this.getTotal()},handleCurrentChange:function(e){this.page=e,this.getList(),this.getTotal()}}}},"28e2":function(e,t,r){"use strict";r("a5d6")},2909:function(e,t,r){"use strict";r.d(t,"a",(function(){return s}));var n=r("6b75");function i(e){if(Array.isArray(e))return Object(n["a"])(e)}r("a4d3"),r("e01a"),r("d28b"),r("a630"),r("d3b7"),r("3ca3"),r("ddb0");function l(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}var a=r("06c5");function o(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function s(e){return i(e)||l(e)||Object(a["a"])(e)||o()}},"4df4":function(e,t,r){"use strict";var n=r("0366"),i=r("7b0b"),l=r("9bdd"),a=r("e95a"),o=r("50c4"),s=r("8418"),c=r("35a1");e.exports=function(e){var t,r,u,d,m,p,f=i(e),b="function"==typeof this?this:Array,v=arguments.length,h=v>1?arguments[1]:void 0,_=void 0!==h,k=c(f),g=0;if(_&&(h=n(h,v>2?arguments[2]:void 0,2)),void 0==k||b==Array&&a(k))for(t=o(f.length),r=new b(t);t>g;g++)p=_?h(f[g],g):f[g],s(r,g,p);else for(d=k.call(f),m=d.next,r=new b;!(u=m.call(d)).done;g++)p=_?l(d,h,[u.value,g],!0):u.value,s(r,g,p);return r.length=g,r}},"65e8":function(e,t,r){"use strict";r.r(t);var n=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("div",{staticClass:"search-table"},[r("div",{staticClass:"search-table-header"},[r("el-form",{attrs:{inline:!0,model:e.queryParams,size:"small"}},[r("el-form-item",{attrs:{label:"操作人："}},[r("el-input",{attrs:{placeholder:"负责人"},model:{value:e.queryParams.responsible_person,callback:function(t){e.$set(e.queryParams,"responsible_person",t)},expression:"queryParams.responsible_person"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary"},on:{click:e.initList}},[e._v("查询")])],1)],1)],1),r("div",{staticClass:"search-table-main"},[r("div",{staticClass:"main-extra"},[r("div",{staticClass:"extra-btn"},[r("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleCreate}},[e._v("添加")]),r("el-button",{attrs:{size:"small",type:"primary"},on:{click:e.handleRemove}},[e._v("删除")])],1),r("div",{staticClass:"extra-info"})]),r("div",{staticClass:"main-list"},[r("el-table",{staticStyle:{width:"100%"},attrs:{data:e.listData,height:"100%"},on:{"selection-change":function(t){return e.selectedList=t}}},[r("el-table-column",{attrs:{align:"center",type:"selection",width:"55"}}),r("el-table-column",{attrs:{align:"center",label:"标记周期",prop:"date"}}),r("el-table-column",{attrs:{align:"center",label:"链接层级",prop:"link_level"}}),r("el-table-column",{attrs:{align:"center",label:"推广力度",prop:"promotion_level"}}),r("el-table-column",{attrs:{align:"center",label:"负责人",prop:"responsible_person"}}),r("el-table-column",{staticStyle:{display:"flex"},attrs:{label:"操作",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row;return[r("span",{staticClass:"inner-opera",on:{click:function(t){return e.handleView(n)}}},[e._v("查看")]),r("span",{staticClass:"inner-opera",on:{click:function(t){return e.handleEdit(n)}}},[e._v("编辑")])]}}])})],1)],1),r("div",{staticClass:"search-table-pag"},[r("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[10,20,30,40,50],"page-size":10,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)]),r("el-dialog",{attrs:{"close-on-click-modal":!1,title:"新增",visible:e.addIsShow},on:{"update:visible":function(t){e.addIsShow=t}}},[e.addIsShow?r("Add",{on:{crudFinish:e.addFinish}}):e._e()],1),r("el-dialog",{attrs:{"close-on-click-modal":!1,title:"修改",visible:e.editIsShow},on:{"update:visible":function(t){e.editIsShow=t}}},[e.editIsShow?r("Edit",{attrs:{id:e.editId},on:{crudFinish:e.editFinish}}):e._e()],1),r("el-dialog",{attrs:{"close-on-click-modal":!1,title:"查看",visible:e.viewIsShow},on:{"update:visible":function(t){e.viewIsShow=t}}},[e.viewIsShow?r("TView",{attrs:{id:e.viewID}}):e._e()],1)],1)},i=[],l=r("c7eb"),a=r("2909"),o=r("1da1"),s=r("5530"),c=(r("99af"),r("a15b"),r("d81d"),r("b775"));function u(e){return Object(c["a"])({method:"GET",url:"/items/key_link_markers",params:e})}function d(e){return Object(c["a"])({method:"GET",url:"/items/key_link_markers/".concat(e)})}function m(){return Object(c["a"])({method:"GET",url:"/items/key_link_markers",params:{"aggregate[countDistinct]":"id"}})}function p(e){return Object(c["a"])({method:"POST",url:"/items/key_link_markers",data:e})}function f(e,t){return c["a"].patch("/items/key_link_markers/".concat(e),t)}function b(e){return Object(c["a"])({method:"DELETE",url:"/items/key_link_markers",data:e})}var v=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{ref:"form",attrs:{"label-position":"right",model:e.form,rules:e.formRules,"label-width":"150px"}},[r("el-form-item",{attrs:{label:"标记周期",prop:"date"}},[r("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",format:"yyyy年MM月dd日"},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1),r("el-form-item",{attrs:{label:"负责人",prop:"responsible_person"}},[r("el-input",{model:{value:e.form.responsible_person,callback:function(t){e.$set(e.form,"responsible_person",t)},expression:"form.responsible_person"}})],1),r("el-form-item",{attrs:{label:"链接层级",prop:"link_level"}},[r("el-select",{model:{value:e.form.link_level,callback:function(t){e.$set(e.form,"link_level",t)},expression:"form.link_level"}},e._l(e.LinkLevelList,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),r("el-form-item",{attrs:{label:"推广力度",prop:"promotion_level"}},[r("el-select",{model:{value:e.form.promotion_level,callback:function(t){e.$set(e.form,"promotion_level",t)},expression:"form.promotion_level"}},e._l(e.promotionLevelList,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),r("el-form-item",{attrs:{label:"链接ID清单",prop:"link_id"}},[r("el-input",{attrs:{type:"textarea",autosize:""},model:{value:e.form.link_id,callback:function(t){e.$set(e.form,"link_id",t)},expression:"form.link_id"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",plain:""},on:{click:e.handlerAdd}},[e._v("确认")])],1)],1)},h=[],_={name:"AddLinkOperationLog",data:function(){return{form:{date:"",responsible_person:"",link_level:"",promotion_level:"",link_id:""},promotionLevelList:["主推","维护"],LinkLevelList:["爆款","热销款"],formRules:{date:[{required:!0,trigger:"blur",message:"标记周期不得为空"}],responsible_person:[{required:!0,trigger:"blur",message:"负责人不得为空"}],link_level:[{required:!0,trigger:"blur",message:"链接层级不得为空"}],promotion_level:[{required:!0,trigger:"blur",message:"推广力度不得为空"}],link_id:[{required:!0,trigger:"blur",message:"链接ID不得为空"}]}}},methods:{handlerAdd:function(){var e=this;return Object(o["a"])(Object(l["a"])().mark((function t(){return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.form.validate(function(){var t=Object(o["a"])(Object(l["a"])().mark((function t(r){var n;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=5;break}return t.next=3,p(e.form);case 3:n=t.sent,n.data&&n.data.id?(e.$message({message:"恭喜你，新增成功",type:"success"}),e.$refs.form.resetFields(),e.$emit("crudFinish")):e.$message({message:"新增失败",type:"error"});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()}}},k=_,g=r("2877"),y=Object(g["a"])(k,v,h,!1,null,"1ac93ad6",null),w=y.exports,x=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{ref:"form",attrs:{"label-position":"right",model:e.form,rules:e.formRules,"label-width":"150px"}},[r("el-form-item",{attrs:{label:"标记周期",prop:"date"}},[r("el-date-picker",{attrs:{type:"date","value-format":"yyyy-MM-dd",format:"yyyy年MM月dd日"},model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1),r("el-form-item",{attrs:{label:"负责人",prop:"responsible_person"}},[r("el-input",{model:{value:e.form.responsible_person,callback:function(t){e.$set(e.form,"responsible_person",t)},expression:"form.responsible_person"}})],1),r("el-form-item",{attrs:{label:"链接层级",prop:"link_level"}},[r("el-select",{model:{value:e.form.link_level,callback:function(t){e.$set(e.form,"link_level",t)},expression:"form.link_level"}},e._l(e.LinkLevelList,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),r("el-form-item",{attrs:{label:"推广力度",prop:"promotion_level"}},[r("el-select",{model:{value:e.form.promotion_level,callback:function(t){e.$set(e.form,"promotion_level",t)},expression:"form.promotion_level"}},e._l(e.promotionLevelList,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),r("el-form-item",{attrs:{label:"链接ID清单",prop:"link_id"}},[r("el-input",{attrs:{type:"textarea",autosize:""},model:{value:e.form.link_id,callback:function(t){e.$set(e.form,"link_id",t)},expression:"form.link_id"}})],1),r("el-form-item",[r("el-button",{attrs:{type:"primary",plain:""},on:{click:e.handlerAdd}},[e._v("确认")])],1)],1)},L=[],j=(r("a9e3"),{name:"EditObjectMark",props:{id:{type:Number,required:!0}},data:function(){return{form:{date:"",responsible_person:"",link_level:"",promotion_level:"",link_id:""},promotionLevelList:["主推","维护"],LinkLevelList:["爆款","热销款"],formRules:{date:[{required:!0,trigger:"blur",message:"标记周期不得为空"}],responsible_person:[{required:!0,trigger:"blur",message:"负责人不得为空"}],link_level:[{required:!0,trigger:"blur",message:"链接层级不得为空"}],promotion_level:[{required:!0,trigger:"blur",message:"推广力度不得为空"}],link_id:[{required:!0,trigger:"blur",message:"链接ID不得为空"}]}}},beforeMount:function(){var e=this;d(this.$props.id).then((function(t){var r=t.data,n=r.date,i=r.link_id,l=r.promotion_level,a=r.link_level,o=r.responsible_person;e.form.date=n,e.form.link_id=i,e.form.promotion_level=l,e.form.link_level=a,e.form.responsible_person=o}))},methods:{handlerAdd:function(){var e=this;return Object(o["a"])(Object(l["a"])().mark((function t(){return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:e.$refs.form.validate(function(){var t=Object(o["a"])(Object(l["a"])().mark((function t(r){var n;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!r){t.next=5;break}return t.next=3,f(e.$props.id,e.form);case 3:n=t.sent,n.data&&n.data.id?(e.$message({message:"恭喜你，修改成功",type:"success"}),e.$refs.form.resetFields(),e.$emit("crudFinish")):e.$message({message:"修改失败",type:"error"});case 5:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 1:case"end":return t.stop()}}),t)})))()}}}),O=j,$=Object(g["a"])(O,x,L,!1,null,"db2b2ac4",null),I=$.exports,S=function(){var e=this,t=e.$createElement,r=e._self._c||t;return r("el-form",{ref:"form",attrs:{"label-position":"right",model:e.form,"label-width":"150px"}},[r("el-form-item",{attrs:{label:"标记周期",prop:"date"}},[r("el-input",{model:{value:e.form.date,callback:function(t){e.$set(e.form,"date",t)},expression:"form.date"}})],1),r("el-form-item",{attrs:{label:"负责人",prop:"responsible_person"}},[r("el-input",{model:{value:e.form.responsible_person,callback:function(t){e.$set(e.form,"responsible_person",t)},expression:"form.responsible_person"}})],1),r("el-form-item",{attrs:{label:"链接层级"}},[r("el-select",{model:{value:e.form.link_level,callback:function(t){e.$set(e.form,"link_level",t)},expression:"form.link_level"}},e._l(e.LinkLevelList,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),r("el-form-item",{attrs:{label:"推广力度"}},[r("el-select",{model:{value:e.form.promotion_level,callback:function(t){e.$set(e.form,"promotion_level",t)},expression:"form.promotion_level"}},e._l(e.promotionLevelList,(function(e){return r("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1),r("el-form-item",{attrs:{label:"链接ID清单"}},[r("el-input",{attrs:{type:"textarea",autosize:""},model:{value:e.form.link_id,callback:function(t){e.$set(e.form,"link_id",t)},expression:"form.link_id"}})],1)],1)},C=[],A={name:"ViewTask",props:{id:{type:Number,required:!0}},data:function(){return{form:{date:"",responsible_person:"",link_level:"",promotion_level:"",link_id:""},promotionLevelList:["主推","维护"],LinkLevelList:["爆款","热销款"],userList:[]}},beforeMount:function(){var e=this;d(this.$props.id).then((function(t){var r=t.data,n=r.date,i=r.link_id,l=r.promotion_level,a=r.link_level,o=r.responsible_person;e.form.date=n,e.form.link_id=i,e.form.promotion_level=l,e.form.link_level=a,e.form.responsible_person=o}))}},q=A,E=(r("28e2"),Object(g["a"])(q,S,C,!1,null,"73420d16",null)),D=E.exports,M=r("1b80"),F={name:"ObjectMark",components:{Add:w,Edit:I,TView:D},mixins:[M["a"]],data:function(){return{displayCol:["id","date","responsible_person","link_level","promotion_level","link_id"],queryParams:{responsible_person:""},addIsShow:!1,editIsShow:!1,viewIsShow:!1,editId:0,viewID:null,selectedList:[],listData:[]}},beforeMount:function(){this.initList()},methods:{addFinish:function(){this.addIsShow=!1,this.initList()},editFinish:function(){this.editIsShow=!1,this.initList()},getTotal:function(){var e=this;m(Object(s["a"])({},this.getFilters())).then((function(t){e.total=t.data[0].countDistinct.id})).catch((function(e){console.log("获取总数失败： ",e)}))},getList:function(){var e=this;return Object(o["a"])(Object(l["a"])().mark((function t(){var r,n;return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return r=Object(s["a"])({page:e.page,limit:e.limit,fields:["id"].concat(Object(a["a"])(e.displayCol)).join(","),sort:"-date"},e.getFilters()),t.prev=1,t.next=4,u(r);case 4:return n=t.sent,e.listData=n.data,t.abrupt("return",n);case 9:t.prev=9,t.t0=t["catch"](1),console.log("获取链接运营计划失败： ",t.t0);case 12:case"end":return t.stop()}}),t,null,[[1,9]])})))()},getFilters:function(){var e={},t=this.queryParams.responsible_person;return t&&(e["filter[_and][0][responsible_person][_contains]"]=t),e},handleRemove:function(){var e=this;return Object(o["a"])(Object(l["a"])().mark((function t(){return Object(l["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,b(e.selectedList.map((function(e){return e.id})));case 3:e.$message({message:"删除成功",type:"success"}),t.next=9;break;case 6:t.prev=6,t.t0=t["catch"](0),e.$message({message:"删除失败",type:"error"});case 9:e.initList();case 10:case"end":return t.stop()}}),t,null,[[0,6]])})))()},handleCreate:function(){this.addIsShow=!0},handleEdit:function(e){this.editId=e.id,this.editIsShow=!0},handleView:function(e){this.viewID=e.id,this.viewIsShow=!0},initList:function(){this.getList(),this.getTotal()}}},T=F,z=(r("a68c"),Object(g["a"])(T,n,i,!1,null,"81ed7b92",null));t["default"]=z.exports},"6b75":function(e,t,r){"use strict";function n(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}r.d(t,"a",(function(){return n}))},a15b:function(e,t,r){"use strict";var n=r("23e7"),i=r("44ad"),l=r("fc6a"),a=r("a640"),o=[].join,s=i!=Object,c=a("join",",");n({target:"Array",proto:!0,forced:s||!c},{join:function(e){return o.call(l(this),void 0===e?",":e)}})},a5d6:function(e,t,r){},a630:function(e,t,r){var n=r("23e7"),i=r("4df4"),l=r("1c7e"),a=!l((function(e){Array.from(e)}));n({target:"Array",stat:!0,forced:a},{from:i})},a68c:function(e,t,r){"use strict";r("fd56")},fd56:function(e,t,r){}}]);