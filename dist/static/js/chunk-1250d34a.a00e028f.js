(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-1250d34a"],{"7df0":function(e,t,a){"use strict";a.d(t,"d",(function(){return i})),a.d(t,"e",(function(){return c})),a.d(t,"b",(function(){return u})),a.d(t,"f",(function(){return m})),a.d(t,"g",(function(){return f})),a.d(t,"h",(function(){return p})),a.d(t,"c",(function(){return d})),a.d(t,"a",(function(){return b}));var r=a("c7eb"),s=a("1da1"),n=a("5530"),l=(a("99af"),a("d81d"),a("b775")),o="task_common_operation";function i(e){return Object(l["a"])({method:"GET",url:"/items/"+o,params:e})}function c(e){return Object(l["a"])({method:"GET",url:"/items/"+o,params:Object(n["a"])({"aggregate[countDistinct]":"id"},e)})}function u(e){return Object(l["a"])({method:"POST",url:"/items/"+o,data:e})}function m(e,t){return l["a"].patch("/items/".concat(o,"/").concat(e),t)}function f(e){return Object(l["a"])({method:"GET",url:"/items/".concat(o,"/").concat(e)})}function p(e){return Object(l["a"])({method:"GET",url:"/users/".concat(e)})}function d(e){return Object(l["a"])({method:"DELETE",url:"/items/".concat(o),data:e})}function b(){return _.apply(this,arguments)}function _(){return _=Object(s["a"])(Object(r["a"])().mark((function e(){var t,a,s,n;return Object(r["a"])().wrap((function(e){while(1)switch(e.prev=e.next){case 0:return t={fields:["user.id","user.first_name","user.last_name","user.avatar"],"filter[_and][0][model][_eq]":o,"filter[_and][1][role][_eq]":2},e.next=3,l["a"].get("/items/permission_control_collections",{params:t});case 3:return a=e.sent,s=a.data,n=void 0===s?[]:s,e.abrupt("return",n.map((function(e){return e.user})));case 7:case"end":return e.stop()}}),e)}))),_.apply(this,arguments)}},a4b4:function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"container"},[a("el-form",{ref:"form",staticClass:"form",attrs:{"label-position":"right",model:e.form,rules:e.formRules,"label-width":"120px"}},[a("h3",{staticClass:"heading"},[e._v("任务下发")]),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"任务状态",prop:"status"}},[a("el-select",{attrs:{placeholder:"请选择任务状态"},model:{value:e.form.status,callback:function(t){e.$set(e.form,"status",t)},expression:"form.status"}},[a("el-option",{attrs:{label:"执行中",value:"执行中"}}),a("el-option",{attrs:{label:"已完成",value:"已完成"}})],1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"执行人",prop:"assigned_to"}},[a("el-select",{attrs:{placeholder:"请选择执行人"},model:{value:e.form.assigned_to,callback:function(t){e.$set(e.form,"assigned_to",t)},expression:"form.assigned_to"}},e._l(e.userInfoList,(function(e){return a("el-option",{key:e.id,attrs:{label:e.first_name,value:e.id}})})),1)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"任务日期",prop:"task_date"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",format:"yyyy年MM月dd日",type:"date"},model:{value:e.form.task_date,callback:function(t){e.$set(e.form,"task_date",t)},expression:"form.task_date"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"截止日期",prop:"deadline_date"}},[a("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd",format:"yyyy年MM月dd日",type:"date"},model:{value:e.form.deadline_date,callback:function(t){e.$set(e.form,"deadline_date",t)},expression:"form.deadline_date"}})],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"任务类型",prop:"task_type"}},[a("el-select",{attrs:{placeholder:"请选择任务类型"},model:{value:e.form.task_type,callback:function(t){e.$set(e.form,"task_type",t)},expression:"form.task_type"}},e._l(e.taskTypeList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{label:"操作对象",prop:"task_object"}},[a("el-select",{attrs:{placeholder:"请选择操作对象"},model:{value:e.form.task_object,callback:function(t){e.$set(e.form,"task_object",t)},expression:"form.task_object"}},[a("el-option",{attrs:{label:"店铺",value:"店铺"}}),a("el-option",{attrs:{label:"链接",value:"链接"}})],1)],1)],1)],1),a("el-row",[a("el-row",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"任务要求",prop:"task_requirements"}},[a("el-input",{model:{value:e.form.task_requirements,callback:function(t){e.$set(e.form,"task_requirements",t)},expression:"form.task_requirements"}})],1)],1)],1),a("el-row",[a("el-row",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"对象清单",prop:"object_list"}},[a("el-input",{attrs:{type:"textarea"},model:{value:e.form.object_list,callback:function(t){e.$set(e.form,"object_list",t)},expression:"form.object_list"}})],1)],1)],1),a("el-row",[a("el-row",{attrs:{span:24}},[a("el-form-item",{attrs:{label:"任务附件"}},[a("el-upload",{staticClass:"upload-demo",attrs:{action:"/api/files","on-change":e.handleFileChange,"http-request":e.uploadFile}},[a("el-button",{attrs:{size:"small",type:"primary"}},[e._v("点击上传")])],1)],1)],1)],1),a("h3",{staticClass:"heading"},[e._v("任务效果跟踪")]),a("el-row",[a("el-col",{attrs:{span:24}},[a("el-form-item",{attrs:{prop:"main_kpi_name",label:"预期效果指标名"}},[a("el-select",{attrs:{placeholder:"请选择预期效果指标名"},model:{value:e.form.main_kpi_name,callback:function(t){e.$set(e.form,"main_kpi_name",t)},expression:"form.main_kpi_name"}},e._l(e.mainKpiNameList,(function(e){return a("el-option",{key:e,attrs:{label:e,value:e}})})),1)],1)],1)],1),a("el-row",{attrs:{gutter:20}},[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"track_days",label:"效果跟踪天数"}},[a("el-input",{attrs:{type:"number"},model:{value:e.form.track_days,callback:function(t){e.$set(e.form,"track_days",t)},expression:"form.track_days"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"main_kpi_target",label:"预期效果值"}},[a("el-input",{attrs:{type:"number"},model:{value:e.form.main_kpi_target,callback:function(t){e.$set(e.form,"main_kpi_target",t)},expression:"form.main_kpi_target"}})],1)],1)],1),a("el-row",{attrs:{gutter:20,type:"flex",justify:"space-around"}},[a("el-col",{attrs:{span:6}},[a("el-button",{staticClass:"btn",attrs:{type:"primary"},on:{click:e.submit}},[e._v("确认")])],1)],1)],1)],1)},s=[],n=a("c7eb"),l=a("1da1"),o=a("7df0"),i=a("e876"),c={name:"addTask",data:function(){return{attachmentFile:null,form:{status:"",assigned_to:"",task_date:"",deadline_date:"",task_type:"",task_requirements:"",object_list:"",task_object:"",task_file:"",main_kpi_name:"",main_kpi_target:"",track_days:""},formRules:{status:[{required:!0,trigger:"blur",message:"任务状态不得为空"}],assigned_to:[{required:!0,trigger:"blur",message:"执行人不得为空"}],task_date:[{required:!0,trigger:"blur",message:"任务日期不得为空"}],deadline_date:[{required:!0,trigger:"blur",message:"截止日期不得为空"}],task_type:[{required:!0,trigger:"blur",message:"任务类型不得为空"}],task_requirements:[{required:!0,trigger:"blur",message:"任务要求不得为空"}],object_list:[{required:!0,trigger:"blur",message:"对象清单不得为空"}],task_object:[{required:!0,trigger:"blur",message:"操作对象不得为空"}]},taskTypeList:["铺货","价格调整","广告调整","标题调整","主图调整","详情页调整","SKU调整","细分市场布局","上架"],userInfoList:[],mainKpiNameList:["销售额","访客数","搜索访客数","平台广告费","平台广告ROI","平台广告PPC","货品成本占比","推广费占比","毛利率"]}},beforeMount:function(){var e=this;Object(o["a"])().then((function(t){e.userInfoList=t}))},methods:{handleFileChange:function(e){this.attachmentFile=e},uploadFile:function(){var e=Object(i["b"])(this.attachmentFile);console.log(e)},submit:function(){var e=this;this.$refs.form.validate(function(){var t=Object(l["a"])(Object(n["a"])().mark((function t(a){return Object(n["a"])().wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!a){t.next=11;break}return t.prev=1,t.next=4,Object(o["b"])(e.form);case 4:e.$message({message:"恭喜你，新增成功",type:"success"}),e.$emit("click"),t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),e.$message({message:"新增失败"+t.t0.message,type:"error"});case 11:case"end":return t.stop()}}),t,null,[[1,8]])})));return function(e){return t.apply(this,arguments)}}())}}},u=c,m=(a("b30e"),a("2877")),f=Object(m["a"])(u,r,s,!1,null,"f39820b8",null);t["default"]=f.exports},b30e:function(e,t,a){"use strict";a("d44f")},d44f:function(e,t,a){},e876:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return n}));a("b0c0");var r=a("b775");function s(e){var t=new FormData;return t.append("title",e.name),t.append("file",e.raw),r["a"].post("/files",t)}function n(e){return r["a"].get("/users",{params:e})}}}]);